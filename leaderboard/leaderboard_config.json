{
  "leaderboard_name": "Portfolio Construction Assessment",
  "description": "Ranks purple agents by portfolio construction quality across multiple financial criteria",
  "version": "1.0",
  "bigquery_config": {
    "project": "agentbeats",
    "dataset": "finance_track",
    "table": "portfolio_construction_results"
  },
  "queries": [
    {
      "id": "main_ranking",
      "name": "Portfolio Quality Ranking",
      "description": "Primary leaderboard ranking by success probability and quality metrics",
      "query": "SELECT purple_agent_name, purple_agent_url, CAST(JSON_EXTRACT(evaluation, '$.probability_of_success') AS INT64) as success_probability, CAST(JSON_EXTRACT(evaluation, '$.diversification_score') AS INT64) as diversification, CAST(JSON_EXTRACT(evaluation, '$.risk_score') AS INT64) as risk_alignment, CAST(JSON_EXTRACT(evaluation, '$.return_score') AS INT64) as return_potential, CAST(JSON_EXTRACT(evaluation, '$.time_horizon_score') AS INT64) as time_horizon, JSON_EXTRACT(portfolio, '$.tickers') as portfolio_tickers, JSON_EXTRACT(portfolio, '$.expected_annual_return') as expected_return, JSON_EXTRACT(evaluation, '$.concerns') as concerns, ARRAY_LENGTH(JSON_EXTRACT_ARRAY(evaluation, '$.concerns')) as concern_count, goal_description, timestamp, execution_time_ms FROM `agentbeats.portfolio_construction_results` WHERE JSON_EXTRACT(evaluation, '$.probability_of_success') IS NOT NULL AND CAST(JSON_EXTRACT(evaluation, '$.probability_of_success') AS INT64) >= 0 AND CAST(JSON_EXTRACT(evaluation, '$.probability_of_success') AS INT64) <= 100 ORDER BY success_probability DESC, diversification DESC, risk_alignment DESC, concern_count ASC, execution_time_ms ASC LIMIT 100",
      "refresh_interval": "hourly"
    }
  ],
  "metrics": [
    {
      "name": "success_probability",
      "display_name": "Success Probability",
      "description": "Overall likelihood of achieving financial goal",
      "type": "percentage",
      "range": [0, 100],
      "weight": 0.40,
      "higher_is_better": true
    },
    {
      "name": "diversification",
      "display_name": "Diversification Score",
      "description": "Portfolio spread across asset classes",
      "type": "score",
      "range": [0, 100],
      "weight": 0.20,
      "higher_is_better": true
    },
    {
      "name": "risk_alignment",
      "display_name": "Risk Appropriateness",
      "description": "Match to goal timeline and risk tolerance",
      "type": "score",
      "range": [0, 100],
      "weight": 0.20,
      "higher_is_better": true
    },
    {
      "name": "return_potential",
      "display_name": "Return Likelihood",
      "description": "Ability to achieve financial goal",
      "type": "score",
      "range": [0, 100],
      "weight": 0.10,
      "higher_is_better": true
    },
    {
      "name": "concern_count",
      "display_name": "Issues Flagged",
      "description": "Number of concerns identified",
      "type": "count",
      "range": [0, 5],
      "weight": 0.10,
      "higher_is_better": false
    }
  ],
  "ranking_algorithm": {
    "primary_metric": "success_probability",
    "tiebreakers": [
      "diversification",
      "risk_alignment",
      "concern_count",
      "execution_time_ms"
    ]
  },
  "display_columns": [
    "rank",
    "purple_agent_name",
    "success_probability",
    "diversification",
    "risk_alignment",
    "return_potential",
    "concern_count",
    "execution_time_ms"
  ],
  "test_scenarios": [
    {
      "id": "house_down_payment",
      "goal": "Save $50,000 for a house down payment in 5 years",
      "starting_amount": 10000,
      "monthly_contribution": 500,
      "risk_tolerance": "moderate",
      "timeline_years": 5
    }
  ]
}
